<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <%- include('../partials/head') %>
    <title>Editar Receita - Finansave</title>
</head>
<body>
    <%- include('../partials/navbar') %>

    <div class="container py-4">
        <div class="form-page">
            <div class="form-card">
            <div class="form-header">
                <h1 class="h3 mb-0">
                    Editar Receita
                </h1>
                <p class="text-muted mb-0">Atualize os dados desta receita</p>
            </div>

            <%- include('../partials/messages') %>

            <form action="/receitas/editar/<%= receita.receita_id %>" method="POST" class="needs-validation" novalidate>
                <!-- Conta -->
                <div class="mb-3">
                    <p class="form-question">Conta de destino da receita</p>
                    <div class="input-with-icon position-relative">
                        <i class="fas fa-credit-card icon-input"></i>
                        <select class="form-select" id="conta_id" name="conta_id" required>
                            <% contas.forEach(function(conta) { %>
                                <option value="<%= conta.conta_id %>" 
                                        <%= (receita.conta_id == conta.conta_id) ? 'selected' : '' %>>
                                    <%= conta.nome %>
                                </option>
                            <% }); %>
                        </select>
                    </div>
                </div>

                <!-- Descrição -->
                <div class="mb-3">
                    <p class="form-question">Descrição da receita</p>
                    <div class="input-with-icon position-relative">
                        <i class="fas fa-edit icon-input"></i>
                        <input type="text" class="form-control" id="descricao" name="descricao" 
                               placeholder="Descreva a receita" 
                               value="<%= receita.descricao %>" 
                               required>
                    </div>
                </div>

                <!-- Categoria -->
                <div class="mb-3">
                    <p class="form-question">Categoria</p>
                    <div class="input-with-icon position-relative">
                        <i class="fas fa-tag icon-input"></i>
                        <input type="text" class="form-control" id="categoria" name="categoria" 
                               placeholder="Categoria da receita" 
                               value="<%= receita.categoria %>" 
                               required>
                    </div>
                </div>

                <!-- Valor -->
                <div class="mb-3">
                    <p class="form-question">Valor</p>
                    <div class="input-with-icon position-relative">
                        <i class="fas fa-coins icon-input"></i>
                        <input type="number" class="form-control" id="valor" name="valor" 
                               step="0.01" placeholder="0,00" min="0.01" 
                               value="<%= parseFloat(receita.valor).toFixed(2) %>" 
                               required>
                    </div>
                </div>

                <!-- Data da Receita -->
                <div class="mb-3">
                    <p class="form-question">Data da receita</p>
                    <div class="input-with-icon position-relative">
                        <i class="fas fa-calendar-alt icon-input"></i>
                        <input type="date" class="form-control" id="data_receita" name="data_receita" 
                               value="<%= receita.data_receita %>" 
                               required>
                    </div>
                </div>

                <!-- Observações -->
                <div class="mb-4">
                    <p class="form-question">Observações (opcional)</p>
                    <div class="input-with-icon position-relative">
                        <i class="fas fa-sticky-note icon-input"></i>
                        <textarea class="form-control" id="observacoes" name="observacoes" 
                                  placeholder="Observações sobre esta receita" style="height: 100px"><%= receita.observacoes || '' %></textarea>
                    </div>
                </div>

                <!-- Botões -->
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a href="/receitas/extrato" class="btn btn-outline-primary me-md-2">
                        <i class="fas fa-arrow-left"></i> Voltar
                    </a>
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-save"></i> Salvar Alterações
                    </button>
                </div>
            </form>
            </div>
        </div>
    </div>

    <script src="/js/main.js"></script>
</body>
</html>